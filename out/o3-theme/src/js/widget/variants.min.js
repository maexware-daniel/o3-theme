document.addEventListener("DOMContentLoaded",function(){const c=()=>{document.querySelectorAll("#variants .dropDown .form-select").forEach(n=>{n.addEventListener("change",a)})},a=n=>{n.preventDefault();const o=document.querySelector(".js-oxWidgetReload");let e=u(o);const r=document.querySelectorAll("select[name^=varselid]","form.js-oxProductForm");e+=Array.from(r).map((t,m)=>`&varselid%5B${m}%5D=${encodeURIComponent(t.value)}`).join(""),fetch(`/widget.php?${e}`,{method:"GET"}).then(t=>{if(!t.ok)throw new Error("Netzwerk-Antwort war nicht ok");return t.text()}).then(t=>{document.querySelector('[data-js="reload"]').outerHTML=t,c(),document.querySelector(".details__picture-thumbnails")&&initPictureSlider(),document.querySelector(".component__productslider")&&initAllProductSliders()}).catch(t=>{console.error("Fetch-Fehler:",t)})};c();const u=n=>Array.from(n.elements).reduce((o,e)=>(!e.name||e.disabled||["file","reset","submit","button"].includes(e.type)||(e.type==="select-multiple"?Array.from(e.options).forEach(r=>{r.selected&&o.push(`${encodeURIComponent(e.name)}=${encodeURIComponent(r.value)}`)}):(e.type!=="checkbox"&&e.type!=="radio"||e.checked)&&o.push(`${encodeURIComponent(e.name)}=${encodeURIComponent(e.value)}`)),o),[]).join("&")});
