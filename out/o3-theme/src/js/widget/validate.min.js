document.addEventListener("DOMContentLoaded",()=>{"use strict";const m=document.querySelectorAll(".needs-validation");Array.from(m).forEach(l=>{const t=l.querySelector("#userPassword"),s=l.querySelector("#userPasswordConfirm"),c=document.querySelector('[data-js="password-length"]'),y=c?parseInt(c.value,10):12,d=l.querySelector(".component__password-bar"),o=l.querySelector(".component__password-label"),u=l.querySelectorAll(".component__password-requirement");l.querySelectorAll('[data-js="toggle-password"]').forEach(e=>{e.addEventListener("click",()=>{const a=e.getAttribute("data-target"),i=l.querySelector(`#${a}`);if(i){const r=i.type==="password";i.type=r?"text":"password",e.setAttribute("aria-pressed",r?"true":"false");const n=e.querySelectorAll("svg");n.length===2&&(n[0].style.display=r?"none":"block",n[1].style.display=r?"block":"none")}})});const p=e=>{const a={length:e.length>=y,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/[0-9]/.test(e),special:/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?/\\~]/.test(e)};let i=0;return u.forEach(r=>{const n=r.getAttribute("data-req");a[n]?(r.classList.add("is-met"),i++):r.classList.remove("is-met")}),{checks:a,metCount:i}},w=e=>{d.classList.remove("is-weak","is-medium","is-strong"),o.classList.remove("is-weak","is-medium","is-strong");let a="",i="";e===0?i="":e<4?(a="is-weak",i=o.getAttribute("data-label-weak")||"Schwach"):e===4?(a="is-medium",i=o.getAttribute("data-label-medium")||"Mittel"):(a="is-strong",i=o.getAttribute("data-label-strong")||"Stark"),a&&(d.classList.add(a),o.classList.add(a)),o.textContent=i,d.setAttribute("aria-valuenow",e)},g=e=>{if(!e){t.setCustomValidity("");return}const{checks:a}=p(e);Object.values(a).every(r=>r===!0)?t.setCustomValidity(""):t.setCustomValidity(" ")};t&&d&&o&&u.length>0&&t.addEventListener("input",()=>{const{metCount:e}=p(t.value);w(e),g(t.value),s&&s.value&&(t.value!==s.value?s.setCustomValidity(" "):s.setCustomValidity(""))}),t&&s&&s.addEventListener("input",()=>{t.value!==s.value?s.setCustomValidity(" "):s.setCustomValidity("")}),l.addEventListener("submit",e=>{t&&g(t.value),t&&s&&(t.value!==s.value?s.setCustomValidity(" "):s.setCustomValidity("")),l.checkValidity()||(e.preventDefault(),e.stopPropagation()),l.classList.add("was-validated")},!1)})});
